#set($layout="layout/layout_empty.html")
<style>
.line{
    height: 40px;
    line-height:40px;
    width: 1px;
    background: #666666;
    float: left;
    margin-top: 5px;
}
.bottom_div_1{
	width: 100%;
	height: 50px;
	background-color: #AAAAAA;
	position: fixed;
	bottom: 0;
}
.bottom_div_1_content{
	height: 50px;
	width:140px;
	line-height:50px;
	float: left;
	color:#5599FF;
	font-size: large;
}
.bottom_div_2{
	width: 100%;
	height: 50px;
	background-color: #888888;
	position:absolute;
	bottom: 50px;
}
.bottom_div_2_conent{
	height: 50px;
	width:140px;
	line-height:50px;
	float: left;
	color:#FFFFFF;
	font-size: large;
}
.bottom_div_2_content_detail{
	border: 2px solid ;
	border-color:#AAAAAA;
	position: absolute;
}
</style>

<div class="bottom_div_1">
	<div class="bottom_div_1_content text-center">类别</div>
	<div class="line"></div>
	<div class="bottom_div_1_content text-center">颜色&nbsp;&nbsp;&nbsp;&nbsp;全部</div>
	<div class="line"></div>
	<div class="bottom_div_1_content text-center">尺寸&nbsp;&nbsp;&nbsp;&nbsp;全部</div>
	<div class="line"></div>
	<div class="bottom_div_1_content text-center">材质&nbsp;&nbsp;&nbsp;&nbsp;全部</div>
	<div class="line"></div>
	<div class="bottom_div_1_content text-center">价格&nbsp;&nbsp;&nbsp;&nbsp;全部</div>
</div>
<script>
$(function(){
	
	$(".bottom_div_1_content").mouseover(function(){
		$(this).css("background-color","#5599FF");
		$(this).css("color","#FFFFFF");
	});
	$(".bottom_div_1_content").mouseout(function(){
		$(this).css("background-color", "");
		$(this).css("color", "#5599FF");
	});
	$(".bottom_div_1_content").click(function(){
		var idx = $(this).index();
		if(idx === 0){
			$.ajax({
    			url:"/fntprodcate/search/0",
    			data:{
    				
    			},
        		type:"get",
        		cache:false,
        		dataType:"json",
        		success:function(data){
        			var ary = new Array();
					for(var index in data){
						var code = data[index].code;
						var name = data[index].name;
						ary.push(code + "#" + name);
					}
					createBottomDiv2(ary, idx);
        		},
        		error:function(){

        		}
    		});
		} else if(idx === 2){
			createBottomDiv2(["全部"], idx);
		} else if(idx === 4){
			createBottomDiv2(["全部"], idx);
		} else if(idx === 6){
			createBottomDiv2(["全部", "实木", "板式", "塑料", "木质"], idx);
		} else if(idx === 8){
			createBottomDiv2(["全部"], idx);
		}
	});
});

function createBottomDiv2(items, idx){
	var parentdiv = $('<div></div>');
    parentdiv.addClass('bottom_div_2');
    for(var i in items){
    	var name = "";
    	var code = "";
		var itm = items[i];
		if(itm.indexOf("#") != -1){
			var itmAry = itm.split("#");
			code = itmAry[0];
			name = itmAry[1];
		} else {
			name = itm;
		}
	    var childdiv1 = $('<div ><a id="div_2_content_' + i + '" val="' + code + '">' + name + '</a></div>');
	    childdiv1.addClass('bottom_div_2_conent text-center');
	    childdiv1.appendTo(parentdiv);
	    var childdiv2 = $('<div></div>');
	    childdiv2.addClass('line');
	    childdiv2.appendTo(parentdiv);
	    if(idx === 0){
		    childdiv1.children().bind("click", function () {
			    var thisObj = $(this);
		    	$.ajax({
	    			url:"/fntprodcate/search/" + $(this).attr("val"),
	        		type:"get",
	        		cache:false,
	        		dataType:"json",
	        		success:function(data){
	        		 	$("div[id^='div_2_content_detail_']").hide();
	 		    		var content = $('<div id="div_2_content_detail_"' + i + '></div>');
	        			var contentList = "";
						for(var index in data){
			    			contentList += "<ul class='list-inline'>";
							var pCode = data[index].code;
							var pName = data[index].name;
							contentList += "<li>" + pName + "</li>";
							var list = data[index].list;
						    for(var cIdx in list){
						    	var chdCode = list[cIdx].code;
						    	var chdName = list[cIdx].name;
						    	contentList += "<li>" + chdName + "</li>";
						    }
							contentList += "</ul>";
							
						}
						content.append(contentList);
				    	content.addClass("bottom_div_2_content_detail");
				    	content.appendTo('body');
				    	content.css("top", thisObj.offset().top - (20 + content.height()));
				    	content.css("left", thisObj.offset().left - 10);
	        		},
	        		error:function(){

	        		}
	    		});
			}); 
	    }
	}
    parentdiv.appendTo('body');    
}
</script>
